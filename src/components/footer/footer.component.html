
<footer [class]="'footer-glassmorphism sticky bottom-0 z-50 p-3 md:p-4 shadow-lg ' + (flash() ? 'animate-flash' : '')">
  <div class="w-full max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
    <!-- Engagement Slider -->
    <div class="flex items-center gap-2 md:gap-4">
      <span class="text-sm md:text-base font-semibold text-slate-300 whitespace-nowrap">學生專注度:</span>
      <div class="flex gap-2">
        <button 
          (click)="setEngagement('低')" 
          [disabled]="!isSessionActive()"
          [class]="'px-4 py-1.5 rounded-md text-sm font-bold transition-all ' + (selectedEngagement() === '低' ? 'bg-red-500 text-white scale-110' : 'bg-red-800/50 hover:bg-red-700/50 text-red-300 disabled:opacity-40 disabled:cursor-not-allowed')">
          低
        </button>
        <button 
          (click)="setEngagement('中')"
          [disabled]="!isSessionActive()"
          [class]="'px-4 py-1.5 rounded-md text-sm font-bold transition-all ' + (selectedEngagement() === '中' ? 'bg-yellow-500 text-white scale-110' : 'bg-yellow-800/50 hover:bg-yellow-700/50 text-yellow-300 disabled:opacity-40 disabled:cursor-not-allowed')">
          中
        </button>
        <button 
          (click)="setEngagement('高')" 
          [disabled]="!isSessionActive()"
          [class]="'px-4 py-1.5 rounded-md text-sm font-bold transition-all ' + (selectedEngagement() === '高' ? 'bg-green-500 text-white scale-110' : 'bg-green-800/50 hover:bg-green-700/50 text-green-300 disabled:opacity-40 disabled:cursor-not-allowed')">
          高
        </button>
      </div>
    </div>
    
    <!-- Qualitative Note Input -->
    <div class="w-full md:w-auto flex-grow md:flex-grow-0 flex items-center gap-2">
      <input 
        type="text"
        placeholder="質性紀錄..."
        [value]="noteText()"
        (input)="noteText.set($event.target.value)"
        (keyup.enter)="addNote()"
        [disabled]="!isSessionActive()"
        class="w-full flex-grow bg-slate-800/50 border border-slate-600 rounded-md px-3 py-1.5 text-sm md:text-base focus:ring-2 focus:ring-amber-500 focus:outline-none disabled:opacity-40 disabled:cursor-not-allowed" 
      />
      <button 
        (click)="addNote()"
        [disabled]="!isSessionActive() || noteText().trim() === ''"
        class="px-4 py-1.5 bg-amber-600 hover:bg-amber-500 rounded-md font-semibold transition-colors disabled:bg-slate-700 disabled:text-slate-500 disabled:cursor-not-allowed">
        發送
      </button>
    </div>
  </div>
</footer>
